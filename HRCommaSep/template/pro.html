<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script src="../static/echarts.js"></script>
  <script src="../static/jquery-3.5.1.min.js"></script>
</head>
<body>
<div id="main1" style="width:1800px;height:1000px;"></div>
<div id="main2" style="width:1800px;height:1000px;"></div>
<div id="main3" style="width:1800px;height:1000px;"></div>
<div id="main4" style="width:1800px;height:1000px;"></div>
<div id="main5" style="width:1800px;height:1000px;"></div>
<div id="main6" style="width:1800px;height:1000px;"></div>
<div id="main7" style="width:1800px;height:1000px;"></div>
<div id="main8" style="width:1800px;height:1000px;"></div>
<div id="main9" style="width:1800px;height:1000px;"></div>
<div id="main10" style="width:1800px;height:1000px;"></div>
<div id="main11" style="width:1800px;height:1000px;"></div>
<div id="main12" style="width:1800px;height:1000px;"></div>

<script>
  var main1 = echarts.init(document.querySelector('#main1'));
  var main2 = echarts.init(document.querySelector('#main2'));
  var main3 = echarts.init(document.querySelector('#main3'));
  var main4 = echarts.init(document.querySelector('#main4'));
  var main5 = echarts.init(document.querySelector('#main5'));
  var main6 = echarts.init(document.querySelector('#main6'));


  function my_echarts(){
    $.ajax({
      url:'/production',
      type:'post',
      async:true,
      success:function(data){

        var totalData15 = [];
        var totalData16 = [];
        var totalData17 = [];
        for(var i =0;i<data.total15.length;i++){
          totalData15.push({name:data.city[i],value:data.total15[i]});
          totalData16.push({name:data.city[i],value:data.total16[i]});
          totalData17.push({name:data.city[i],value:data.total17[i]});
        }
        main1.setOption({
          title:[
            {text:'国内生产总值',left:'center',bottom:'40%'},
            {text:'2015年国内生产总值',left:'15%',top:'19'},
            {text:'2016年国内生产总值',left:'45%',top:'19'},
            {text:'2017年国内生产总值',left:'75%',top:'19'},

          ],
           tooltip:{trigger:'axis'},
           legend:{data:['2015','2016','2017'],bottom:'2%'},
           xAxis:{type:'category',data:data.city,axisLabel:{interval:0,rotate:90}},
           yAxis:{type:'value',gridIndex:0},
           grid:{top:'55%'},
           series:[
            {type:'line',smooth:true,data:data.total15,name:'2015',},
            {type:'line',smooth:true,data:data.total16,name:'2016',},
            {type:'line',smooth:true,data:data.total17,name:'2017',},
            {type:'pie',radius:'30%',center:['20%','22%'],label:{show:true,formatter:'{b}\n{c}:({d}%)'},data:totalData15},
            {type:'pie',radius:'30%',center:['50%','22%'],label:{show:true,formatter:'{b}\n{c}:({d}%)'},data:totalData16},
            {type:'pie',radius:'30%',center:['80%','22%'],label:{show:true,formatter:'{b}\n{c}:({d}%)'},data:totalData17},
           ]
        })



        var oneData15 = [];
        var oneData16 = [];
        var oneData17 = [];
        for(var i =0;i<data.total15.length;i++){
          oneData15.push({name:data.city[i],value:data.one15[i]});
          oneData16.push({name:data.city[i],value:data.one16[i]});
          oneData17.push({name:data.city[i],value:data.one17[i]});
        }
        main2.setOption({
          title:[
            {text:'第一产业增加值',left:'center',bottom:'40%'},
            {text:'2015年第一产业增加值',left:'15%',top:'19'},
            {text:'2016年第一产业增加值',left:'45%',top:'19'},
            {text:'2017年第一产业增加值',left:'75%',top:'19'},

          ],
           tooltip:{trigger:'axis'},
           legend:{data:['2015','2016','2017'],bottom:'2%'},
           xAxis:{type:'category',data:data.city,axisLabel:{interval:0,rotate:90}},
           yAxis:{type:'value',gridIndex:0},
           grid:{top:'55%'},
           series:[
            {type:'line',smooth:true,data:data.one15,name:'2015',},
            {type:'line',smooth:true,data:data.one16,name:'2016',},
            {type:'line',smooth:true,data:data.one17,name:'2017',},
            {type:'pie',radius:'30%',center:['20%','22%'],label:{show:true,formatter:'{b}\n{c}:({d}%)'},data:oneData15},
            {type:'pie',radius:'30%',center:['50%','22%'],label:{show:true,formatter:'{b}\n{c}:({d}%)'},data:oneData16},
            {type:'pie',radius:'30%',center:['80%','22%'],label:{show:true,formatter:'{b}\n{c}:({d}%)'},data:oneData17},
           ]
        })



        var twoData15 = [];
        var twoData16 = [];
        var twoData17 = [];
        for(var i =0;i<data.total15.length;i++){
          twoData15.push({name:data.city[i],value:data.two15[i]});
          twoData16.push({name:data.city[i],value:data.two16[i]});
          twoData17.push({name:data.city[i],value:data.two17[i]});
        }
        main3.setOption({
          title:[
            {text:'第二产业增加值',left:'center',bottom:'40%'},
            {text:'2015年第二产业增加值',left:'15%',top:'19'},
            {text:'2016年第二产业增加值',left:'45%',top:'19'},
            {text:'2017年第二产业增加值',left:'75%',top:'19'},

          ],
           tooltip:{trigger:'axis'},
           legend:{data:['2015','2016','2017'],bottom:'2%'},
           xAxis:{type:'category',data:data.city,axisLabel:{interval:0,rotate:90}},
           yAxis:{type:'value',gridIndex:0},
           grid:{top:'55%'},
           series:[
            {type:'line',smooth:true,data:data.two15,name:'2015',},
            {type:'line',smooth:true,data:data.two16,name:'2016',},
            {type:'line',smooth:true,data:data.two17,name:'2017',},
            {type:'pie',radius:'30%',center:['20%','22%'],label:{show:true,formatter:'{b}\n{c}:({d}%)'},data:twoData15},
            {type:'pie',radius:'30%',center:['50%','22%'],label:{show:true,formatter:'{b}\n{c}:({d}%)'},data:twoData16},
            {type:'pie',radius:'30%',center:['80%','22%'],label:{show:true,formatter:'{b}\n{c}:({d}%)'},data:twoData17},
           ]
        })


      },
      error:function(){
        alert('ajax错误');
      }
    })
  }

  my_echarts();

</script>
</body>
</html>